## 冯诺依曼模型

定义计算机基本结构为 5 个部分，分别是运算器、控制器、存储器、输入设备、输出设备。

## 内存

我们的程序和数据都是存储在内存，存储的区域是线性的。
<br/>在计算机数据存储中，存储数据的基本单位是`字节（byte）`，1 字节等于 8 位（8 bit）。<span style="color:orange;">
每一个字节都对应一个内存地址。</span>
<br/>内存的地址是从 0 开始编号的，然后自增排列，最后一个地址为内存总字节数 - 1，这种结构好似我们程序里的数组，所以内存的读写任何一个数据的速度都是一样的。

## 寄存器

* 通用寄存器：用来存放需要进行运算的数据
* 程序计数器（PC）：用来存储 CPU 要执行下一条指令「所在的内存地址」
* 指令寄存器：用来存放当前正在执行的指令

## 总线

* 地址总线：用于指定 CPU 将要操作的内存地址
* 数据总线：用于读写内存的数据
* 控制总线：用于发送和接收信号，比如中断、设备复位等信号，CPU 收到信号后自然进行响应，这时也需要控制总线

当 CPU 要读写内存数据的时候，一般需要通过下面这三个总线：

* 首先要通过「地址总线」来指定内存的地址；
* 然后通过「控制总线」控制是读或写命令；
* 最后通过「数据总线」来传输数据；

## 指令

* R 指令：用在算术和逻辑操作，里面有读取和写入数据的寄存器地址
* I 指令：用在数据传输、条件分支等。
* J 指令：用在跳转，高 6 位之外的 26 位都是一个跳转后的地址

### 指令周期

* PU 通过程序计数器读取对应内存地址的指令，这个部分称为 Fetch（取得指令）；
* PU 对指令进行解码，这个部分称为 Decode（指令译码）；
* PU 执行指令，这个部分称为 Execution（执行指令）；
* PU 将计算结果存回寄存器或者将寄存器的值存入内存，这个部分称为 Store（数据回写）；

上面这 4 个阶段，我们称为指令周期（Instrution Cycle），CPU 的工作就是一个周期接着一个周期，周而复始。

### 指令的类型

指令从功能角度划分，可以分为 5 大类：

* 数据传输类型的指令：比如 store/load 是寄存器与内存间数据传输的指令，mov 是将一个内存地址的数据移动到另一个内存地址的指令；
* 运算类型的指令：比如加减乘除、位运算、比较大小等等，它们最多只能处理两个寄存器中的数据；
* 跳转类型的指令：通过修改程序计数器的值来达到跳转执行指令的过程，比如编程中常见的 if-else、switch-case、函数调用等。
* 信号类型的指令：比如发生中断的指令 trap；
* 闲置类型的指令：比如指令 nop，执行后 CPU 会空转一个周期；

## 64 位相比 32 位 CPU 的优势在哪吗？64 位 CPU 的计算性能一定比 32 位 CPU 高很多吗？

64 位相比 32 位 CPU 的优势主要体现在两个方面：

* 64 位 CPU 可以一次计算超过 32 位的数字，而 32 位 CPU 如果要计算超过 32
  位的数字，要分多步骤进行计算，效率就没那么高，但是大部分应用程序很少会计算那么大的数字，所以只有运算大数字的时候，64 位 CPU
  的优势才能体现出来，否则和 32 位 CPU 的计算性能相差不大。
* 通常来说 64 位 CPU 的地址总线是 48 位，而 32 位 CPU 的地址总线是 32 位，所以 64 位 CPU 可以寻址更大的物理内存空间。如果一个
  32 位 CPU 的地址总线是 32 位，那么该 CPU 最大寻址能力是 4G，即使你加了 8G 大小的物理内存，也还是只能寻址到 4G 大小的地址，而如果一个
  64 位 CPU 的地址总线是 48 位，那么该 CPU 最大寻址能力是 2^48，远超于 32 位 CPU 最大寻址能力。

## 软件的 32 位和 64 位之间的区别吗？再来 32 位的操作系统可以运行在 64 位的电脑上吗？64 位的操作系统可以运行在 32 位的电脑上吗？如果不行，原因是什么？

64 位和 32 位软件，实际上代表指令是 64 位还是 32 位的：

* 如果 32 位指令在 64 位机器上执行，需要一套兼容机制，就可以做到兼容运行了。但是如果 64 位指令在 32 位机器上执行，就比较困难了，因为
  32 位的寄存器存不下 64 位的指令；
* 操作系统其实也是一种程序，我们也会看到操作系统会分成 32 位操作系统、64 位操作系统，其代表意义就是操作系统中程序的指令是多少位，比如
  64 位操作系统，指令也就是 64 位，因此不能装在 32 位机器上。

总之，硬件的 64 位和 32 位指的是 CPU 的位宽，软件的 64 位和 32 位指的是指令的位宽。
